<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Greenv2 MVP</title>
        <link href="css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href=".">Greenv2 MVP</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="active">
                                <a href=".">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="DEMO/">Deployment</a>
</li>
                                    
<li >
    <a href="CERTIFICATE-SETUP/">Certificates</a>
</li>
                                    
<li >
    <a href="Drupal-Cloud-Object-Storage/">Cloud Object Storage</a>
</li>
                                </ul>
                            </li>
                            <li >
                                <a href="about/">About</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="disabled">
                                <a rel="next" >
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="DEMO/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#greenv2">Greenv2</a></li>
            <li><a href="#project-context">Project Context</a></li>
            <li><a href="#functional-requirements">Functional requirements</a></li>
            <li><a href="#non-functional-requirements">Non-functional requirements</a></li>
            <li><a href="#logical-architecture">Logical architecture</a></li>
            <li><a href="#landscape-diagram-of-the-services-used">Landscape diagram of the services used</a></li>
            <li><a href="#setup-the-environment-and-deploy-the-cluster">Setup the environment and deploy the cluster</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="greenv2">Greenv2</h1>
<h2 id="project-context">Project Context</h2>
<ul>
<li>Client requires CMS-as-a-Service</li>
<li>Drupal is the CMS technology of choice</li>
<li>Many competitors in this space; mostly open source</li>
<li>With CMS-aaS we must provide a DevOps solution</li>
<li>Dependencies with Drupal: LAMP stack and Caching</li>
<li>End goal: To provide the fastest solution to get new content into Production</li>
</ul>
<h2 id="functional-requirements">Functional requirements</h2>
<p>Separate environments for: </p>
<ul>
<li>Dev; Test; Production;</li>
<li>Site must be hosted on public cloud;</li>
<li>Site must be accessible globally;</li>
<li>Code deployment can be done using FTP/SFTP;</li>
<li>Content distribution using CDN;</li>
<li>SMTP setup to facilitate email communication to support “Contact Us” function in the website;</li>
</ul>
<h2 id="non-functional-requirements">Non-functional requirements</h2>
<p>Security:</p>
<ul>
<li>Enterprise grade firewalling;</li>
<li>DDOS protection;</li>
<li>Availability:</li>
<li>High Availability of the infrastructure platform;</li>
</ul>
<p>Scalability:</p>
<ul>
<li>Scalable infrastructure with possible future expansion of the website.</li>
<li>Infrastructure support for services around DNS mapping and Certificate installation.</li>
</ul>
<h2 id="logical-architecture">Logical architecture</h2>
<p><img alt="Logical Architecture" src="img/LogicalArchitecture.jpg" /></p>
<h2 id="landscape-diagram-of-the-services-used">Landscape diagram of the services used</h2>
<p>When custom code is checked into this repository, it triggers a Docker image build which stores the images into a private container registry that analyzes the security of the images. These images are then rolled out across the Kubernetes cluster through staging and production gates. Data from production can be synchronized back to staging to ensure the environments are as close as possible.</p>
<p><img alt="" src="img/links.png" /></p>
<h2 id="setup-the-environment-and-deploy-the-cluster">Setup the environment and deploy the cluster</h2>
<h3 id="one-time-container-service-and-cloud-data-services-setup">One time Container Service and Cloud data services setup</h3>
<p>See the Container Service Kubernetes and IBM Cloud services (MySQL, Redis, Memcached) <a href="docs/INITIAL-SETUP.md">configuration instructions</a>.</p>
<h3 id="building-and-deploying-the-first-set-of-containers">Building and deploying the first set of containers</h3>
<p>See the Docker container build and Kubernetes deployment <a href="docs/DEPLOY-CONTAINERS.md">instructions</a>.</p>
<h3 id="ongoing-development-and-operations-with-github-commits">Ongoing development and operations with GitHub commits</h3>
<p>See the ongoing development <a href="docs/ONGOING-DEVELOPMENT.md">instructions</a>. And the work in progress DevOps <a href="docs/PIPELINE-SETUP.md">pipeline docs</a>. This shows how container images are rebuilt and how to address security issues detected by the IBM Vulnerability Advisor.</p>
<h3 id="synchronizing-data-from-production-back-to-staging">Synchronizing data from production back to staging</h3>
<p>There are two <a href="docs/SYNCHRONIZING-DATA.md">synchronization scripts</a> that can be invoked to bring user generated changes to files or data from production back into the staging environment. You can also execute other scripts inside the containers as well.</p>
<h3 id="security">Security</h3>
<p>The web site uses TLS certificate to secure the data transfer. The domain is provided by <a href="https://cloud.ibm.com/catalog/infrastructure/domain_registration">IBM Cloud Domain name Service</a> and it is managed by <a href="https://cloud.ibm.com/catalog/services/internet-services">IBM Cloud Internet Service aka CIS</a>. <a href="https://cloud.ibm.com/catalog/services/certificate-manager">IBM Certificate Manager</a> store the certificate and has the ability to keep track of the expiration date of the certificate. IBM Certificate Manager is able to renew automatically the certificate before its expiration date. IBM Certificate Manager uses a webhook to an <a href="https://cloud.ibm.com/openwhisk/">IBM Function</a> (serverless) with a smart small code to renew the certificate. </p>
<h3 id="license">License</h3>
<p><a href="LICENSE.txt">Apache 2.0</a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"search": 83, "next": 78, "help": 191, "previous": 80};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2019-07-23 09:07:19
-->
